<!DOCTYPE html>
<html>
  <head>
    <title>Teacher Sign Up</title>
    <link rel="stylesheet" href="./style/style.css" />
    <link href="./style/output.css" rel="stylesheet" />
    <script type="module">
      // Import the necessary Firebase modules
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
      import {
        getDatabase,
        ref,
        set,
      } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";
      import {
        getAuth,
        createUserWithEmailAndPassword,
      } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js";

      // Your Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyB3ENB3jhesEfvms1KZth1hJnnwAYNL1-U",
        authDomain: "project100percent-3dfe4.firebaseapp.com",
        databaseURL: "https://project100percent-3dfe4-default-rtdb.firebaseio.com",
        projectId: "project100percent-3dfe4",
        storageBucket: "project100percent-3dfe4.appspot.com",
        messagingSenderId: "502230560480",
        appId: "1:502230560480:web:2a6e94a1586adad81e6a85",
        measurementId: "G-9LFHSQV4Z1",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
      const auth = getAuth(app);

      // Teacher Sign Up
      const signUpForm = document.getElementById("signUpForm");
      signUpForm.addEventListener("submit", (e) => {
        e.preventDefault();
        const email = signUpForm["signUpEmail"].value;
        const password = signUpForm["signUpPassword"].value;
        const name = signUpForm["signUpName"].value;
        const subject = signUpForm["subject"].value;

        createUserWithEmailAndPassword(auth, email, password)
          .then((userCredential) => {
            const user = userCredential.user;
            set(ref(database, "teachers/" + user.uid), {
              name: name,
              email: email,
              subject: subject, // Add the subject to the database
            })
              .then(() => {
                alert("Sign Up Successful!");
                window.location.href = "teacher_dashboard.html"; // Redirect to teacher dashboard
              })
              .catch((error) => {
                alert(error.message);
              });
          })
          .catch((error) => {
            alert(error.message);
          });
      });
    </script>
  </head>
  <body>
    <div>
      <h2>Teacher Sign Up</h2>
      <form id="signUpForm">
        <div>
          <input type="text" id="signUpName" placeholder="Name" required />
        </div>
        <div>
          <input type="email" id="signUpEmail" placeholder="Email" required />
        </div>
        <div>
          <input
            type="password"
            id="signUpPassword"
            placeholder="Password"
            required
          />
        </div>
        <div>
          <label for="subject">Subject:</label>
          <select id="subject" name="subject" required>
            <option value="">Select a subject</option>
            <option value="English">English</option>
            <option value="Hindi">Hindi</option>
            <option value="EVS">EVS</option>
            <option value="Science">Science</option>
            <option value="Political Science">Political Science</option>
            <option value="Maths">Maths</option>
            <option value="Computer">Computer</option>
            <option value="Arts">Arts</option>
            <option value="SST">SST</option>
          </select>
        </div>
        <button type="submit">Sign Up</button>
      </form>
    </div>
  </body>
</html>